<!DOCTYPE html>
<html>
<head>
    <title>CRM Automation Adoption Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Figtree:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <style>
        * { font-family: 'Figtree', sans-serif; margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #F2F5FF; padding: 24px; }
        .header { display: flex; align-items: center; gap: 16px; margin-bottom: 8px; }
        .header h1 { font-size: 28px; font-weight: 700; color: #181B34; }
        .freshness { font-size: 12px; color: #787878; margin-bottom: 20px; }
        .tabs { display: flex; gap: 8px; margin-bottom: 24px; }
        .tab { padding: 10px 20px; border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer; background: white; border: 2px solid transparent; color: #787878; }
        .tab:hover { border-color: #c3c6d4; }
        .tab.active { background: #6161FF; color: white; border-color: #6161FF; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .kpi-row { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 24px; }
        .kpi-card { background: white; border-radius: 12px; padding: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.08); }
        .kpi-label { font-size: 11px; font-weight: 600; color: #787878; margin-bottom: 8px; text-transform: uppercase; }
        .kpi-value { font-size: 32px; font-weight: 700; color: #6161FF; }
        .kpi-sub { font-size: 12px; color: #787878; margin-top: 4px; }
        .row { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 24px; }
        .row.full { grid-template-columns: 1fr; }
        .card { background: white; border-radius: 12px; padding: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.08); }
        .card-title { font-size: 14px; font-weight: 600; color: #181B34; margin-bottom: 4px; }
        .card-caption { font-size: 12px; color: #787878; margin-bottom: 16px; }
        .explanation { background: white; border-left: 4px solid #6161FF; padding: 16px 20px; border-radius: 0 8px 8px 0; margin-bottom: 24px; font-size: 14px; line-height: 1.6; }
        .view-toggle { padding: 8px 16px; border-radius: 6px; font-size: 13px; font-weight: 600; cursor: pointer; background: white; border: 1px solid #c3c6d4; color: #787878; margin-right: 8px; }
        .view-toggle:hover { border-color: #6161FF; }
        .view-toggle.active { background: #6161FF; color: white; border-color: #6161FF; }
    </style>
</head>
<body>
    <div class="header">
        <h1>‚ö° CRM Automation Adoption</h1>
    </div>
    <div class="freshness">Generated: 2026-02-20 16:20</div>
    
    <div class="tabs">
        <div class="tab active" onclick="switchTab('adoption')">üìä Adoption</div>
        <div class="tab" onclick="switchTab('events')">üñ±Ô∏è Events</div>
    </div>
    
    <div id="tab-adoption" class="tab-content active">
        <div class="explanation">
            <strong>What's included:</strong> Only the 11 CRM recommended automation templates from the Automation Center.<br>
            <em>Status changes ‚Üí Move to group/board, Set status, Set date, Notify, Create subitem</em><br>
            <em>Item created ‚Üí Set status, Set date, Notify, Create subitem</em> | <em>Date arrives ‚Üí Notify</em><br><br>
            <span style="color: #787878;"><strong>Excludes:</strong> Legacy automations, boards without entity, ticket boards.</span>
        </div>
        
        <div class="kpi-row">
            <div class="kpi-card">
                <div class="kpi-label">Account Adoption Rate</div>
                <div class="kpi-value">75.9%</div>
                <div class="kpi-sub">28.1K of 37.0K accounts</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-label">Board Adoption Rate</div>
                <div class="kpi-value">13.3%</div>
                <div class="kpi-sub">112.4K of 847.8K boards</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-label">Total Automations</div>
                <div class="kpi-value">341.0K</div>
                <div class="kpi-sub">active automations</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-label">Avg per Account</div>
                <div class="kpi-value">12.1</div>
                <div class="kpi-sub">among adopters</div>
            </div>
        </div>
        
        <div class="row full">
            <div class="card">
                <div class="card-title">Cumulative Adoption Over Time</div>
                <div class="card-caption">% of paying accounts with at least one automation (up to that month)</div>
                <div id="chart-cumulative"></div>
            </div>
        </div>
        
        <div class="row">
            <div class="card">
                <div class="card-title">Current Adoption by Automation Type</div>
                <div class="card-caption">% of paying accounts with active automation of each type</div>
                <div id="chart-type"></div>
            </div>
            <div class="card">
                <div class="card-title">Adoption by Entity Type</div>
                <div class="card-caption">% of boards (by entity) with at least one automation</div>
                <div id="chart-entity"></div>
            </div>
        </div>
        
        <div class="row full">
            <div class="card">
                <div class="card-title">Automations Created Per Month</div>
                <div class="card-caption">Number of automations created by paying accounts (at time of creation)</div>
                <div style="margin-bottom: 12px;">
                    <span style="font-size: 14px; font-weight: 600; margin-right: 12px;">View:</span>
                    <button id="btn-monthly-total" class="view-toggle active" onclick="switchMonthlyView('total')">Total</button>
                    <button id="btn-monthly-stacked" class="view-toggle" onclick="switchMonthlyView('stacked')">By Automation Type</button>
                </div>
                <div id="chart-monthly-total"></div>
                <div id="chart-monthly-stacked" style="display: none;"></div>
            </div>
        </div>
        
        <div class="row full">
            <div class="card">
                <div class="card-title">Adoption Rate by Automation Type Over Time</div>
                <div class="card-caption">Cumulative % of paying accounts (per month) that have used each automation type</div>
                <div id="chart-trend"></div>
            </div>
        </div>
    </div>
    
    <div id="tab-events" class="tab-content">
        <div class="kpi-row" style="grid-template-columns: repeat(3, 1fr);">
            <div class="kpi-card">
                <div class="kpi-label">Clicks on "CRM Recommended" Category</div>
                <div class="kpi-value">269</div>
                <div class="kpi-sub">in Automation Center since Feb 19</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-label">Accounts That Clicked</div>
                <div class="kpi-value">2</div>
                <div class="kpi-sub">unique accounts exploring CRM automations</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-label">Clicks per Account</div>
                <div class="kpi-value">134.5</div>
                <div class="kpi-sub">average engagement</div>
            </div>
        </div>
        
        <div style="margin-bottom: 16px;">
            <span style="font-size: 14px; font-weight: 600; margin-right: 12px;">View:</span>
            <button id="btn-daily" class="view-toggle active" onclick="switchEventsView('daily')">Daily</button>
            <button id="btn-weekly" class="view-toggle" onclick="switchEventsView('weekly')">Weekly</button>
        </div>
        
        <div id="events-daily" class="events-view">
            <div class="row full">
                <div class="card">
                    <div class="card-title">Daily Clicks on "CRM Recommended" Category</div>
                    <div id="chart-events-clicks-daily"></div>
                </div>
            </div>
            <div class="row full">
                <div class="card">
                    <div class="card-title">Daily Unique Accounts Clicking</div>
                    <div id="chart-events-accounts-daily"></div>
                </div>
            </div>
        </div>
        
        <div id="events-weekly" class="events-view" style="display: none;">
            <div class="row full">
                <div class="card">
                    <div class="card-title">Weekly Clicks on "CRM Recommended" Category</div>
                    <div id="chart-events-clicks-weekly"></div>
                </div>
            </div>
            <div class="row full">
                <div class="card">
                    <div class="card-title">Weekly Unique Accounts Clicking</div>
                    <div id="chart-events-accounts-weekly"></div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        function switchTab(name) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelector('.tab[onclick*="' + name + '"]').classList.add('active');
            document.getElementById('tab-' + name).classList.add('active');
        }
        
        function switchEventsView(view) {
            document.getElementById('btn-daily').classList.remove('active');
            document.getElementById('btn-weekly').classList.remove('active');
            document.getElementById('btn-' + view).classList.add('active');
            document.getElementById('events-daily').style.display = view === 'daily' ? 'block' : 'none';
            document.getElementById('events-weekly').style.display = view === 'weekly' ? 'block' : 'none';
        }
        
        function switchMonthlyView(view) {
            document.getElementById('btn-monthly-total').classList.remove('active');
            document.getElementById('btn-monthly-stacked').classList.remove('active');
            document.getElementById('btn-monthly-' + view).classList.add('active');
            document.getElementById('chart-monthly-total').style.display = view === 'total' ? 'block' : 'none';
            document.getElementById('chart-monthly-stacked').style.display = view === 'stacked' ? 'block' : 'none';
        }
        
        Plotly.newPlot('chart-cumulative', [{
            type: 'scatter', mode: 'lines+markers',
            x: ["2025-03-01", "2025-04-01", "2025-05-01", "2025-06-01", "2025-07-01", "2025-08-01", "2025-09-01", "2025-10-01", "2025-11-01", "2025-12-01", "2026-01-01", "2026-02-01"],
            y: [67.25, 68.53, 69.82, 70.91, 71.83, 72.87, 73.66, 74.4, 74.87, 75.22, 75.84, 75.94],
            line: { color: '#6161FF', width: 3 },
            marker: { size: 8 },
            fill: 'tozeroy',
            fillcolor: 'rgba(97, 97, 255, 0.1)'
        }], {
            margin: { l: 60, r: 30, t: 20, b: 50 },
            xaxis: { showgrid: false },
            yaxis: { title: 'Adoption Rate (%)', ticksuffix: '%', showgrid: true, gridcolor: 'rgba(0,0,0,0.05)' },
            height: 300
        });
        
        Plotly.newPlot('chart-type', [{
            type: 'bar', orientation: 'h',
            y: ["item created \u2192 Create subitem", "item created \u2192 Notify", "Status changes to something \u2192 Set status", "Status changes to something \u2192 Move to board", "Status changes to something \u2192 Set date", "item created \u2192 Set date", "Scheduled Trigger \u2192 Notify", "Status changes to something \u2192 Notify", "Status changes to something \u2192 Move to group", "item created \u2192 Set status"],
            x: [3.07, 6.6, 10.26, 10.93, 17.44, 19.43, 21.75, 35.47, 39.51, 62.63],
            marker: { color: '#181B34' },
            text: ["3.1%", "6.6%", "10.3%", "10.9%", "17.4%", "19.4%", "21.7%", "35.5%", "39.5%", "62.6%"],
            textposition: 'outside',
            cliponaxis: false,
            textfont: { size: 11 }
        }], {
            margin: { l: 320, r: 80, t: 10, b: 30 },
            xaxis: { ticksuffix: '%', showgrid: false, range: [0, Math.max(...[3.07, 6.6, 10.26, 10.93, 17.44, 19.43, 21.75, 35.47, 39.51, 62.63]) * 1.3] },
            yaxis: { automargin: true },
            height: 450
        });
        
        Plotly.newPlot('chart-entity', [{
            type: 'bar', orientation: 'h',
            y: ["Project", "Deals", "Projects", "ProjectRequestAndApproval", "lead", "Leads", "deal", "standaloneProject", "Activity", "portfolio"],
            x: [21.14, 21.29, 22.73, 23.13, 29.16, 29.33, 30.22, 33.1, 36.04, 40.6],
            marker: { color: '#181B34' },
            text: ["21.1%", "21.3%", "22.7%", "23.1%", "29.2%", "29.3%", "30.2%", "33.1%", "36.0%", "40.6%"],
            textposition: 'outside',
            cliponaxis: false,
            textfont: { size: 11 }
        }], {
            margin: { l: 200, r: 80, t: 10, b: 30 },
            xaxis: { ticksuffix: '%', showgrid: false, range: [0, Math.max(...[21.14, 21.29, 22.73, 23.13, 29.16, 29.33, 30.22, 33.1, 36.04, 40.6]) * 1.3] },
            yaxis: { automargin: true },
            height: 450
        });
        
        // Total monthly chart
        Plotly.newPlot('chart-monthly-total', [{
            type: 'bar',
            x: ["2025-02-01", "2025-03-01", "2025-04-01", "2025-05-01", "2025-06-01", "2025-07-01", "2025-08-01", "2025-09-01", "2025-10-01", "2025-11-01", "2025-12-01", "2026-01-01", "2026-02-01"],
            y: [4709, 16563, 14848, 15136, 14717, 16647, 14797, 14881, 15830, 13301, 12187, 14463, 7365],
            marker: { color: '#6161FF' }
        }], {
            margin: { l: 60, r: 30, t: 20, b: 50 },
            xaxis: { showgrid: false },
            yaxis: { title: 'Automations Created', showgrid: true, gridcolor: 'rgba(0,0,0,0.05)' },
            height: 300
        });
        
        // Stacked monthly chart by automation type
        var stackedData = {"Status changes to something \u2192 Move to group": [1913, 6332, 5695, 5822, 5689, 6436, 5674, 5742, 6290, 5173, 4656, 5835, 2967], "item created \u2192 Set status": [625, 2320, 2282, 2539, 2584, 2770, 2354, 2536, 2609, 2296, 2044, 2501, 1246], "Status changes to something \u2192 Set status": [392, 1647, 1241, 1036, 1099, 1314, 1137, 1101, 1300, 953, 1036, 1216, 635], "Status changes to something \u2192 Set date": [386, 1251, 1027, 1187, 1169, 1370, 1241, 1191, 1161, 1079, 982, 931, 577], "Scheduled Trigger \u2192 Notify": [357, 1198, 1233, 1180, 1120, 1319, 1139, 1108, 1133, 1009, 946, 945, 332], "Status changes to something \u2192 Notify": [254, 831, 872, 1078, 905, 922, 882, 872, 886, 740, 697, 805, 388]};
        var stackedColors = ['#6161FF', '#00CA72', '#FDAB3D', '#E2445C', '#0086C0', '#9D65C9'];
        var stackedTraces = [];
        var colorIdx = 0;
        for (var autoType in stackedData) {
            stackedTraces.push({
                type: 'bar',
                name: autoType,
                x: ["2025-02-01", "2025-03-01", "2025-04-01", "2025-05-01", "2025-06-01", "2025-07-01", "2025-08-01", "2025-09-01", "2025-10-01", "2025-11-01", "2025-12-01", "2026-01-01", "2026-02-01"],
                y: stackedData[autoType],
                marker: { color: stackedColors[colorIdx % stackedColors.length] }
            });
            colorIdx++;
        }
        Plotly.newPlot('chart-monthly-stacked', stackedTraces, {
            margin: { l: 60, r: 30, t: 20, b: 80 },
            xaxis: { showgrid: false },
            yaxis: { title: 'Automations Created', showgrid: true, gridcolor: 'rgba(0,0,0,0.05)' },
            barmode: 'stack',
            legend: { orientation: 'h', y: -0.25, font: { size: 10 } },
            height: 400
        });
        
        // Trend chart with multiple lines
        var trendData = {"Scheduled Trigger \u2192 Notify": {"months": ["2025-03-01", "2025-04-01", "2025-05-01", "2025-06-01", "2025-07-01", "2025-08-01", "2025-09-01", "2025-10-01", "2025-11-01", "2025-12-01", "2026-01-01", "2026-02-01"], "rates": [19.74, 19.87, 20.03, 20.17, 20.6, 20.86, 20.96, 21.14, 21.32, 21.59, 21.84, 21.75]}, "Status changes to something \u2192 Move to group": {"months": ["2025-03-01", "2025-04-01", "2025-05-01", "2025-06-01", "2025-07-01", "2025-08-01", "2025-09-01", "2025-10-01", "2025-11-01", "2025-12-01", "2026-01-01", "2026-02-01"], "rates": [32.27, 33.03, 34.03, 34.7, 35.49, 36.37, 36.98, 37.48, 38.07, 38.54, 39.24, 39.51]}, "Status changes to something \u2192 Notify": {"months": ["2025-03-01", "2025-04-01", "2025-05-01", "2025-06-01", "2025-07-01", "2025-08-01", "2025-09-01", "2025-10-01", "2025-11-01", "2025-12-01", "2026-01-01", "2026-02-01"], "rates": [29.14, 30.17, 31.31, 32.14, 32.92, 33.64, 34.04, 34.75, 35.12, 35.33, 35.62, 35.47]}, "item created \u2192 Set date": {"months": ["2025-03-01", "2025-04-01", "2025-05-01", "2025-06-01", "2025-07-01", "2025-08-01", "2025-09-01", "2025-10-01", "2025-11-01", "2025-12-01", "2026-01-01", "2026-02-01"], "rates": [16.12, 16.62, 16.91, 17.06, 17.43, 17.77, 18.05, 18.26, 18.68, 19.0, 19.34, 19.43]}, "item created \u2192 Set status": {"months": ["2025-03-01", "2025-04-01", "2025-05-01", "2025-06-01", "2025-07-01", "2025-08-01", "2025-09-01", "2025-10-01", "2025-11-01", "2025-12-01", "2026-01-01", "2026-02-01"], "rates": [52.05, 53.56, 55.27, 56.61, 57.77, 58.92, 59.76, 60.8, 61.36, 61.83, 62.52, 62.63]}};
        var colors = ['#6161FF', '#00CA72', '#FDAB3D', '#E2445C', '#0086C0'];
        var trendTraces = [];
        var i = 0;
        for (var autoType in trendData) {
            trendTraces.push({
                type: 'scatter',
                mode: 'lines+markers',
                name: autoType,
                x: trendData[autoType].months,
                y: trendData[autoType].rates,
                line: { color: colors[i % colors.length], width: 2 },
                marker: { size: 6 }
            });
            i++;
        }
        Plotly.newPlot('chart-trend', trendTraces, {
            margin: { l: 60, r: 30, t: 20, b: 120 },
            xaxis: { showgrid: false },
            yaxis: { title: 'Adoption Rate (%)', showgrid: true, gridcolor: 'rgba(0,0,0,0.05)' },
            legend: { orientation: 'h', y: -0.25, font: { size: 10 } },
            height: 450
        });
        
        // Daily events charts
        Plotly.newPlot('chart-events-clicks-daily', [{
            type: 'bar',
            x: ["2026-02-19", "2026-02-20"],
            y: [193, 76],
            marker: { color: '#6161FF' },
            text: [193, 76],
            textposition: 'outside',
            cliponaxis: false,
            textfont: { size: 10 }
        }], {
            margin: { l: 60, r: 30, t: 50, b: 70 },
            xaxis: { showgrid: false, tickangle: -45 },
            yaxis: { title: 'Clicks', showgrid: true, gridcolor: 'rgba(0,0,0,0.05)', range: [0, Math.max(...[193, 76]) * 1.25] },
            height: 350
        });
        
        Plotly.newPlot('chart-events-accounts-daily', [{
            type: 'bar',
            x: ["2026-02-19", "2026-02-20"],
            y: [146, 61],
            marker: { color: '#181B34' },
            text: [146, 61],
            textposition: 'outside',
            cliponaxis: false,
            textfont: { size: 10 }
        }], {
            margin: { l: 60, r: 30, t: 50, b: 70 },
            xaxis: { showgrid: false, tickangle: -45 },
            yaxis: { title: 'Unique Accounts', showgrid: true, gridcolor: 'rgba(0,0,0,0.05)', range: [0, Math.max(...[146, 61]) * 1.25] },
            height: 350
        });
        
        // Weekly events charts
        Plotly.newPlot('chart-events-clicks-weekly', [{
            type: 'bar',
            x: ["2026-02-16"],
            y: [269],
            marker: { color: '#6161FF' },
            text: [269],
            textposition: 'outside',
            cliponaxis: false,
            textfont: { size: 11 }
        }], {
            margin: { l: 60, r: 30, t: 50, b: 50 },
            xaxis: { showgrid: false },
            yaxis: { title: 'Clicks', showgrid: true, gridcolor: 'rgba(0,0,0,0.05)', range: [0, Math.max(...[269]) * 1.2] },
            height: 320
        });
        
        Plotly.newPlot('chart-events-accounts-weekly', [{
            type: 'bar',
            x: ["2026-02-16"],
            y: [204],
            marker: { color: '#181B34' },
            text: [204],
            textposition: 'outside',
            cliponaxis: false,
            textfont: { size: 11 }
        }], {
            margin: { l: 60, r: 30, t: 50, b: 50 },
            xaxis: { showgrid: false },
            yaxis: { title: 'Unique Accounts', showgrid: true, gridcolor: 'rgba(0,0,0,0.05)', range: [0, Math.max(...[204]) * 1.2] },
            height: 320
        });
    </script>
</body>
</html>
